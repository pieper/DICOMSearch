<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>J.4 Networking</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.2.html" title="PS3.2" />
      <link rel="up" href="chapter_J.html" title="J Conformance Statement Sample STOW Service (Informative)" />
      <link rel="prev" href="sect_J.3.html" title="J.3 Introduction" />
      <link rel="next" href="sect_J.5.html" title="J.5 Media Interchange" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">J.4 Networking</th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_J.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">J Conformance Statement Sample STOW Service (Informative)</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_J.5.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_J.4" shape="rect"></a>J.4 Networking</h2>
               </div>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_J.4.1" shape="rect"></a>J.4.1 Implementation Model</h3>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.1.1" shape="rect"></a>J.4.1.1 Application Data Flow</h4>
                     </div>
                  </div>
               </div>
               <p>Example STOW Service</p>
               <p>
            </p>
               <div class="figure">
                  <a id="figure_J.4.1-1" shape="rect"></a>
                  <div class="figure-contents">
                     <div class="mediaobject">
                        <img src="figures/PS3.2_J.4.1-1.svg" alt="Application Data Flow Diagram" />
                     </div>
                  </div>
                  <p class="title">
                     <strong>Figure J.4.1-1. Application Data Flow Diagram</strong>
                  </p>
               </div>
               <p>
                  <br class="figure-break" clear="none" />
               </p>
               <p>The STOW-RS Service Application receives STOW requests from a remote AE. These requests are HTTP/1.1 POST requests. It is associated with the local real-world activity "Store Instances". It converts these requests into internal functions to store the given SOP Instances. It returns a summary HTTP status line, including a status code and an associated textual phase, followed by an XML message indicating success, warning, or failure for each instance to the requesting remote AE.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.1.2" shape="rect"></a>J.4.1.2 Functional Definition of AEs</h4>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_J.4.1.2.1" shape="rect"></a>J.4.1.2.1 Functional Definition of STOW Service Application</h5>
                        </div>
                     </div>
                  </div>
                  <p>The reception of a STOW-RS POST request will activate the STOW-RS Service. The storage request is based upon the accept headers in the STOW-RS POST request. The response includes an HTTP/1.1 status line, including a status-code and its associated textual phrase, followed by an XML message indicating success, warning, or failure for each instance stored by the STOW-RS service.</p>
               </div>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_J.4.2" shape="rect"></a>J.4.2 AE Specifications</h3>
                  </div>
               </div>
            </div>
            <p>This AE complies with <a href="../part18/sect_6.6.html" class="olink" shape="rect">Section 6.6 “STOW-RS Request/Response” in <span class="olinkdocname">PS3.18</span>
               </a>, specification for STOW-RS storage.</p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.2.1" shape="rect"></a>J.4.2.1 STOW-RS Specifications</h4>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_J.4.2.1.1" shape="rect"></a>J.4.2.1.1 STOW-RS Store Instance</h5>
                        </div>
                     </div>
                  </div>
                  <div class="table">
                     <a id="table_J.4.2-1" shape="rect"></a>
                     <p class="title">
                        <strong>Table J.4.2-1. STOW-RS Store Instances Specification</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <span class="bold">
                                          <strong>Category</strong>
                                       </span>
                                    </p>
                                 </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <span class="bold">
                                          <strong>Restrictions</strong>
                                       </span>
                                    </p>
                                 </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Media Types Supported (Accept header)</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Restricted to application/dicom or application/dicom+xml</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Transfer Syntaxes Supported</p>
                                    <p>(Media Type parameter)</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Any Transfer Syntax supported by the hosting EXAMPLE-PACS-ARCHIVE</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>SOP Class Restrictions</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Restricted to SOP classes supported by the hosting EXAMPLE-PACS-ARCHIVE</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Size restriction</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Restricted to size supported by the hosting EXAMPLE-PACS-ARCHIVE</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_J.4.2.2.4" shape="rect"></a>J.4.2.2.4 Connection Policies</h5>
                        </div>
                     </div>
                  </div>
                  <div class="section">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h6 class="title">
                                 <a id="sect_J.4.2.2.4.1" shape="rect"></a>J.4.2.2.4.1 General</h6>
                           </div>
                        </div>
                     </div>
                     <p>All standard RS connection policies apply. There are no extensions for RS options.</p>
                  </div>
                  <div class="section">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h6 class="title">
                                 <a id="sect_J.4.2.2.4.2" shape="rect"></a>J.4.2.2.4.2 Number of Connections</h6>
                           </div>
                        </div>
                     </div>
                     <p>EXAMPLE-STOW-SERVICE limits the number of simultaneous RS requests. Additional requests will be queued after the HTTP/1.1 connection is accepted. When an earlier request completes, a pending request will proceed.</p>
                     <div class="table">
                        <a id="table_J.4.2-4" shape="rect"></a>
                        <p class="title">
                           <strong>Table J.4.2-4. Number of HTTP Requests Supported</strong>
                        </p>
                        <div class="table-contents">
                           <table frame="box" rules="all">
                              <tbody>
                                 <tr valign="top">
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>Maximum number of simultaneous RS requests</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>100 (configurable)</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </div>
                     <br class="table-break" clear="none" />
                  </div>
                  <div class="section">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h6 class="title">
                                 <a id="sect_J.4.2.2.4.3" shape="rect"></a>J.4.2.2.4.3 Asynchronous Nature</h6>
                           </div>
                        </div>
                     </div>
                     <p>EXAMPLE-STOW-SERVICE does not support RS asynchronous response.</p>
                  </div>
                  <div class="section">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h6 class="title">
                                 <a id="sect_J.4.2.2.4.4" shape="rect"></a>J.4.2.2.4.4 SOP Specific Conformance for SOP Class(Es)</h6>
                           </div>
                        </div>
                     </div>
                     <p>The EXAMPLE-STOW-SERVICE response message header contains status codes indicating success, warning, or failure as shown in the "HTTP/1.1 Standard Response Codes" below. No additional status codes are used.</p>
                     <p></p>
                     <div class="table">
                        <a id="table_J.4.2.2.4.4" shape="rect"></a>
                        <p class="title">
                           <strong>Table J.4.2.2.4.4-1. HTTP/1.1 Standard Response Codes</strong>
                        </p>
                        <div class="table-contents">
                           <table frame="box" rules="all">
                              <thead>
                                 <tr valign="top">
                                    <th align="center" rowspan="1" colspan="1">
                                       <p>Service Status</p>
                                    </th>
                                    <th align="center" rowspan="1" colspan="1">
                                       <p>HTTP/1.1 Status Code</p>
                                    </th>
                                    <th align="center" rowspan="1" colspan="1">
                                       <p>STOW-RS Description</p>
                                    </th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr valign="top">
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>Failure</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>400 - Bad Request</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service was unable to store any instances due to bad syntax.</p>
                                    </td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="center" rowspan="1" colspan="1"></td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>401 - Unauthorized</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service refused to create or append any instances because the client is not authenticated.</p>
                                    </td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="center" rowspan="1" colspan="1"></td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>403 - Forbidden</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service understood the request, but is refusing to fulfill it (e.g., an authenticated user with insufficient privileges).</p>
                                    </td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="center" rowspan="1" colspan="1"></td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>409 - Conflict</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service request was formed correctly but the service was unable to store any instances due to a conflict in the request (e.g., unsupported SOP Class or Study Instance UID mismatch).</p>
                                       <p>This may also be used to indicate that a STOW-RS Service was unable to store any instances for a mixture of reasons.</p>
                                       <p>Additional information regarding the instance errors can be found in the XML response message body.</p>
                                    </td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="center" rowspan="1" colspan="1"></td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>503 - Busy</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service was unable to store any instances because it was out of resources.</p>
                                    </td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>Warning</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>202 - Accepted</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service stored some of the instances but warnings or failures exist for others.</p>
                                       <p>Additional information regarding this error can be found in the XML response message body.</p>
                                    </td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="center" rowspan="1" colspan="1"></td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="center" rowspan="1" colspan="1"></td>
                                 </tr>
                                 <tr valign="top">
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>Success</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>200 - OK</p>
                                    </td>
                                    <td align="left" rowspan="1" colspan="1">
                                       <p>This indicates that the STOW-RS Service successfully stored all the instances.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </div>
                     <br class="table-break" clear="none" />
                     <p>The EXAMPLE-STOW-SERVICE response message body (<a href="../part18/PS3.18.html" class="olink" shape="rect">PS3.18</a> XML Store Instances Response Module) contains the DICOM status codes for individual SOP Instances indicating success, warning, or failure as defined below. No additional status codes are used.</p>
                     <p>For the following semantics the associated value are used for the Warning Reason (0008,1196):</p>
                     <div class="variablelist">
                        <dl class="variablelist">
                           <dt>
                              <span class="term">B000</span>
                           </dt>
                           <dd>
                              <p>Coercion of Data Elements</p>
                              <p>The STOW-RS Service modified one or more data elements during storage of the instance.</p>
                           </dd>
                           <dt>
                              <span class="term">B006</span>
                           </dt>
                           <dd>
                              <p>Elements Discarded</p>
                              <p>The STOW-RS Service discarded some data elements during storage of the instance.</p>
                           </dd>
                           <dt>
                              <span class="term">B007</span>
                           </dt>
                           <dd>
                              <p>Data Set does not match SOP Class</p>
                              <p>The STOW-RS Service stored the instance despite the Data Set not matching the constraints of the SOP Class.</p>
                           </dd>
                        </dl>
                     </div>
                     <p>Additional codes may be used for the Warning Reason (0008,1196) to address the semantics of other issues.</p>
                     <p>In the event that multiple codes may apply, the single most appropriate code is used.</p>
                     <p>For the following semantics the associated value are used for the Failure Reason (0008,1197).</p>
                     <div class="variablelist">
                        <dl class="variablelist">
                           <dt>
                              <span class="term">A700</span>
                           </dt>
                           <dd>
                              <p>Refused out of Resources</p>
                              <p>The STOW-RS Service did not store the instance because it was out of memory.</p>
                           </dd>
                           <dt>
                              <span class="term">A710</span>
                           </dt>
                           <dd>
                              <p>Refused out of Resources</p>
                              <p>The STOW-RS Service did not store the instance because it was out of storage space.</p>
                           </dd>
                           <dt>
                              <span class="term">A900</span>
                           </dt>
                           <dd>
                              <p>Error: Data Set does not match SOP Class</p>
                              <p>The STOW-RS Service did not store the instance because the SOP Class of an element in the Referenced SOP Instance Sequence did not correspond to the SOP class registered for this SOP Instance at the STOW-RS Service.</p>
                           </dd>
                           <dt>
                              <span class="term">C000</span>
                           </dt>
                           <dd>
                              <p>Error: Cannot understand</p>
                              <p>The STOW-RS Service did not store the instance because it cannot understand certain Data Elements.</p>
                           </dd>
                           <dt>
                              <span class="term">C122</span>
                           </dt>
                           <dd>
                              <p>Referenced Transfer Syntax not supported</p>
                              <p>The STOW-RS Service did not store the instance because it does not support the requested Transfer Syntax for the instance.</p>
                           </dd>
                           <dt>
                              <span class="term">0110</span>
                           </dt>
                           <dd>
                              <p>Processing failure</p>
                              <p>The STOW-RS Service did not store the instance because of a general failure in processing the operation.</p>
                           </dd>
                           <dt>
                              <span class="term">0122</span>
                           </dt>
                           <dd>
                              <p>Referenced SOP Class not supported</p>
                              <p>The STOW-RS Service did not store the instance because it does not support the requested SOP Class.</p>
                           </dd>
                        </dl>
                     </div>
                     <p>Additional codes may be used for the Failure Reason (0008,1197) to address the semantics of other errors.</p>
                     <p>In the event that multiple codes may apply, the single most appropriate code shall be used.</p>
                  </div>
               </div>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_J.4.3" shape="rect"></a>J.4.3 Network Interfaces</h3>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.3.1" shape="rect"></a>J.4.3.1 Physical Network Interface</h4>
                     </div>
                  </div>
               </div>
               <p>EXAMPLE-STOW-SERVICE uses the network interface from the hosting EXAMPLE-PACS-ARCHIVE. See its conformance claim for details.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.3.2" shape="rect"></a>J.4.3.2 Additional Protocols</h4>
                     </div>
                  </div>
               </div>
               <p>EXAMPLE-STOW-SERVICE uses the network services from the hosting EXAMPLE-PACS-ARCHIVE. See its conformance claim for details.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.3.3" shape="rect"></a>J.4.3.3 IPv4 and IPv6 Support</h4>
                     </div>
                  </div>
               </div>
               <p>This product supports both IPv4 and IPv6 connections.</p>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_J.4.4" shape="rect"></a>J.4.4 Configuration</h3>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_J.4.4.1" shape="rect"></a>J.4.4.1 STOW-RS Interface</h4>
                     </div>
                  </div>
               </div>
               <p>The EXAMPLE-STOW-SERVICE is configured to respond to TLS protected traffic. The TLS port will refuse any connection from a system that is not recognized as authenticated by a known authority.</p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_J.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_J.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_J.5.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">J.3 Introduction </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.2.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> J.5 Media Interchange</td>
            </tr>
         </table>
      </div>
   </body>
</html>
