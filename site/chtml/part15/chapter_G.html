<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>G Time Synchronization Profiles</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.15.html" title="PS3.15" />
      <link rel="up" href="PS3.15.html" title="PS3.15" />
      <link rel="prev" href="chapter_F.html" title="F Network Address Management Profiles" />
      <link rel="next" href="chapter_H.html" title="H Application Configuration Management Profiles" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">G Time Synchronization Profiles</th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="chapter_F.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1"> </th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="chapter_H.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div class="chapter">
         <div class="titlepage">
            <div>
               <div>
                  <h1 class="title">
                     <a id="chapter_G" shape="rect"></a>G Time Synchronization Profiles</h1>
               </div>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both">
                        <a id="sect_G.1" shape="rect"></a>G.1 Basic Time Synchronization Profile</h2>
                  </div>
               </div>
            </div>
            <p>The Basic Time Synchronization Profile defines services to synchronize the clocks on multiple computers. It employs the Network Time Protocol (NTP) services that have been used for this purpose by many other disciplines. NTP permits synchronization to a local server that provides a local time source, and synchronization to a variety of external time services. The accuracy and precision controls are not explicitly part of the protocol. They are determined in large part by the selection of clock hardware and network topology.</p>
            <p>An extensive discussion of implementation strategies for NTP can be found at http://www.ntp.org.</p>
            <p>The Basic Time Synchronization Profile applies to the actors DHCP Client, DHCP Server, SNTP Client, NTP Client and NTP Server. The mandatory and optional transactions are described in the table and sections below.</p>
            <div class="table">
               <a id="table_G.1-1" shape="rect"></a>
               <p class="title">
                  <strong>Table G.1-1. Basic Time Synchronization Profile</strong>
               </p>
               <div class="table-contents">
                  <table frame="box" rules="all">
                     <thead>
                        <tr valign="top">
                           <th align="center" rowspan="1" colspan="1">
                              <p>Actor</p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>Transaction</p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>Optionality</p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>Section</p>
                           </th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>NTP Server</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Maintain Time</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>M</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.2</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1"></td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Find NTP Servers</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>O</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.1</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>NTP Client</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Maintain Time</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>M</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.2</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1"></td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Find NTP Servers</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>O</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.1</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>SNTP Client</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Maintain Time</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>M</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.2</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>DHCP Server</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Find NTP Servers</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>O</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.1</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>DCHP Client</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>Find NTP Servers</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>M</p>
                           </td>
                           <td align="center" rowspan="1" colspan="1">
                              <p>G.1.1</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <br class="table-break" clear="none" />
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_G.1.1" shape="rect"></a>G.1.1 Find NTP Servers</h3>
                     </div>
                  </div>
               </div>
               <p>The optional NTP protocol elements for NTP autoconfiguration and NTP autodiscovery can significantly simplify installation. The NTP specification for these is defined such that they are truly optional for both client and server. In the event that a client cannot find an NTP server automatically using these services, it can use the DHCP optional information or manually configured information to find a server. Support for these services is recommended but not mandatory.</p>
               <p>This transaction exists primarily as a means of documenting whether particular models of equipment support the automatic discovery. This lets installation and operation plan their DHCP and equipment installation procedures in advance.</p>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.1" shape="rect"></a>G.1.1.1 Scope</h4>
                        </div>
                     </div>
                  </div>
                  <p>This applies to any client that needs the correct time, or that needs to have its time stamps synchronized with those of another system. The accuracy of synchronization is determined by details of the configuration and implementation of the network and NTP servers at any specific site.</p>
                  <p>Both the NTP and SNTP clients shall utilize the NTP server information if it is provided by DHCP and NTP services have not been found using autodiscovery. Manual configuration shall be provided as a backup. Autodiscovery or DHCP are preferred.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.2" shape="rect"></a>G.1.1.2 Use Case Roles</h4>
                        </div>
                     </div>
                  </div>
                  <p>
  </p>
                  <div class="figure">
                     <a id="figure_G.1-1" shape="rect"></a>
                     <div class="figure-contents">
                        <div class="mediaobject">
                           <img src="figures/PS3.15_G.1-1.svg" alt="Find NTP Servers" />
                        </div>
                     </div>
                     <p class="title">
                        <strong>Figure G.1-1. Find NTP Servers</strong>
                     </p>
                  </div>
                  <p>
                     <br class="figure-break" clear="none" />
                  </p>
                  <div class="variablelist">
                     <dl class="variablelist">
                        <dt>
                           <span class="term">DHCP Server</span>
                        </dt>
                        <dd>
                           <p>Provides UTC offset, provides list of NTP servers</p>
                        </dd>
                        <dt>
                           <span class="term">DHCP Client</span>
                        </dt>
                        <dd>
                           <p>Receives UTC offset and list of NTP servers</p>
                        </dd>
                        <dt>
                           <span class="term">NTP Client</span>
                        </dt>
                        <dd>
                           <p>Maintains client clock</p>
                        </dd>
                        <dt>
                           <span class="term">SNTP Client</span>
                        </dt>
                        <dd>
                           <p>Maintains client clock</p>
                        </dd>
                        <dt>
                           <span class="term">NTP Servers</span>
                        </dt>
                        <dd>
                           <p>External time servers. These may have connections to other time servers, and may be synchronized with national time sources.</p>
                        </dd>
                     </dl>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.3" shape="rect"></a>G.1.1.3 Referenced Standards</h4>
                        </div>
                     </div>
                  </div>
                  <p>RFC-1305 Network Time Protocol (NTP) standard specification</p>
                  <p>RFC-2030 Simple NTP</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.4" shape="rect"></a>G.1.1.4 Basic Course of Events.</h4>
                        </div>
                     </div>
                  </div>
                  <p>The DHCP server may have provided a list of NTP servers or one may be obtained through optional NTP discovery mechanisms. If this list is empty and no manually configured NTP server address is present, the client shall select its internal clock as the time source (see below). If the list is not empty, the client shall attempt to maintain time synchronization with all those NTP servers. The client may attempt to use the multi-cast, manycast, and broadcast options as defined in RFC-1305. It shall utilize the point to point synchronization option if these are not available. The synchronization shall be in compliance with either RFC-1305 (NTP) or RFC-2030 (SNTP).</p>
                  <p>If the application requires time synchronization of better than 1s mean error, the client should use NTP. SNTP cannot ensure a more accurate time synchronization.</p>
                  <p>The DHCP server may have provided a UTC offset between the local time at the machine and UTC. If this is missing, the UTC offset will be obtained in a device specific manner (e.g., service, CMOS). If the UTC offset is provided, the client shall use this offset for converting between UTC and local time.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.5" shape="rect"></a>G.1.1.5 Alternative Paths</h4>
                        </div>
                     </div>
                  </div>
                  <p>If there is no UTC offset information from the DHCP server, then the NTP client will use its preset or service set UTC offset.</p>
                  <p>If there is no NTP time server, then the NTP client will select its internal battery clock as the source of UTC. These may have substantial errors. This also means that when there are multiple systems but no NTP source, the multiple systems will not attempt to synchronize with one another.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.6" shape="rect"></a>G.1.1.6 Assumptions</h4>
                        </div>
                     </div>
                  </div>
                  <p>The local battery clock time is set to UTC, or the local operating system has proper support to manage both battery clock time, NTP clock time, and system clock time. The NTP time is always in UTC.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.1.7" shape="rect"></a>G.1.1.7 Postconditions</h4>
                        </div>
                     </div>
                  </div>
                  <p>The client will remain synchronized with its selected time source. In an environment with one or more NTP servers, this will be good time synchronization. In the absence of NTP servers, the selected source will be the internal client clock, with all its attendant errors.</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_G.1.2" shape="rect"></a>G.1.2 Maintain Time</h3>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.2.1" shape="rect"></a>G.1.2.1 Scope</h4>
                        </div>
                     </div>
                  </div>
                  <p>This applies to any client that needs the correct time, or that needs to have its time stamps synchronized with those of another system. The accuracy of synchronization is determined by details of the configuration and implementation of the network and NTP servers at any specific site.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.2.2" shape="rect"></a>G.1.2.2 Use Case Roles</h4>
                        </div>
                     </div>
                  </div>
                  <p>
  </p>
                  <div class="figure">
                     <a id="figure_G.2-1" shape="rect"></a>
                     <div class="figure-contents">
                        <div class="mediaobject">
                           <img src="figures/PS3.15_G.2-1.svg" alt="Maintain Time" />
                        </div>
                     </div>
                     <p class="title">
                        <strong>Figure G.2-1. Maintain Time</strong>
                     </p>
                  </div>
                  <p>
                     <br class="figure-break" clear="none" />
                  </p>
                  <div class="variablelist">
                     <dl class="variablelist">
                        <dt>
                           <span class="term">NTP/SNTP Client</span>
                        </dt>
                        <dd>
                           <p>Maintains client clock</p>
                        </dd>
                        <dt>
                           <span class="term">NTP Servers</span>
                        </dt>
                        <dd>
                           <p>External time servers. These may have connections to other time servers, and may be synchronized with national time sources.</p>
                        </dd>
                     </dl>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.2.3" shape="rect"></a>G.1.2.3 Referenced Standards</h4>
                        </div>
                     </div>
                  </div>
                  <p>RFC-1305 Network Time Protocol (NTP) standard specification</p>
                  <p>RFC-2030 Simple NTP</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_G.1.2.4" shape="rect"></a>G.1.2.4 Basic Course of Events.</h4>
                        </div>
                     </div>
                  </div>
                  <p>All the full detail is in RFC-1305 and RFC-2030. The most common and mandatory minimum mode for NTP operation establishes a ping pong of messages between client and servers. The client sends requests to the servers, which fill in time related fields in a response, and the client performs optimal estimation of the present time. The RFCs deal with issues of lost messages, estimation formulae, etc. Once the clocks are in synchronization these ping pong exchanges typically stabilize at roughly 1000 second intervals.</p>
                  <p>The client machine typically uses the time estimate to maintain the internal operating system clock. This clock is then used by applications that need time information. This approach eliminates the application visible difference between synchronized and unsynchronized time. The RFCs provide guidance on proper implementations.</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_G.1.3" shape="rect"></a>G.1.3 NTP Security Considerations (Informative)</h3>
                     </div>
                  </div>
               </div>
               <p>The Basic Time Synchronization profile should not be used outside a secured environment. At a minimum there should be:</p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="a">
                     <li class="listitem">
                        <p>Firewall and or router protections to ensure that only approved hosts are used for NTP services.</p>
                     </li>
                     <li class="listitem">
                        <p>Agreements for VPN and other access should require that use only approved NTP servers over the VPN.</p>
                     </li>
                  </ol>
               </div>
               <p>This limits the risks to insider denial of service attacks. The service denial is manipulation of the time synchronization such that systems report the incorrect time. The NTP protocols incorporate secure transaction capabilities that can be negotiated. This profile assumes that the above protections are sufficient and does not require support of secure transactions, but they may be supported by an implementation. The SNTP client does not support the use of secured transactions.</p>
               <p>Sites with particular concerns regarding security of external network time sources may choose to utilize a GPS or radio based time synchronization. Note that when selecting GPS and radio time sources, care must be taken to establish the accuracy and stability provided by the particular time source. The underlying time accuracy of GPS and radio sources is superb, but some receivers are intended for low accuracy uses and do not provide an accurate or stable result.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_G.1.4" shape="rect"></a>G.1.4 NTP Implementation Considerations (Informative)</h3>
                     </div>
                  </div>
               </div>
               <p>NTP servers always support both NTP and SNTP clients. The difference is one of synchronization accuracy, not communications compatibility. Although in theory both NTP and SNTP clients could run at the same time on a client this is not recommended. The SNTP updates will simply degrade the time accuracy. When other time protocol clients, such as IRIG, are also being used these clients must be coordinated with the NTP client to avoid synchronization problems.</p>
               <p>RFC-1305 includes specifications for management of intermittent access to the NTP servers, broken servers, etc. The NTP servers do not need to be present and operational when the NTP process begins. NTP supports the use of multiple servers to provide backup and better accuracy. RFC-1305 specifies the mechanisms used by the NTP client. The site www.ntp.org provides extensive guidance and references regarding the most effective configurations for backups and multiple server configurations.</p>
               <p>The local battery clock and client operating system must be properly UTC aware. NTP synchronization is in UTC. This can be a source of confusion because some computers are configured with their hardware clocks set to local time and the operating system set (incorrectly) to UTC. This is a common error that only becomes apparent when the devices attempt to synchronize clocks.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_G.1.5" shape="rect"></a>G.1.5 Conformance</h3>
                     </div>
                  </div>
               </div>
               <p>The Conformance Statement for the NTP Server and NTP Client shall state whether secure transactions are supported.</p>
               <p>The Conformance Statement for the NTP Server shall state whether it is also an NTP Client.</p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="chapter_F.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1"> </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="chapter_H.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">F Network Address Management Profiles </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.15.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> H Application Configuration Management Profiles</td>
            </tr>
         </table>
      </div>
   </body>
</html>
