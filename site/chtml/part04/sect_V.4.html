<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>V.4 DIMSE-C Service Group</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.4.html" title="PS3.4" />
      <link rel="up" href="chapter_V.html" title="V Substance Administration Query Service Class (Normative)" />
      <link rel="prev" href="sect_V.3.html" title="V.3 Query Information Models" />
      <link rel="next" href="sect_V.5.html" title="V.5 Association Negotiation" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">V.4 DIMSE-C Service Group</th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_V.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">V Substance Administration Query Service Class (Normative)</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_V.5.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_V.4" shape="rect"></a>V.4 DIMSE-C Service Group</h2>
               </div>
            </div>
         </div>
         <p>One DIMSE-C Service is used in the construction of SOP Classes of the Substance Administration Query Service Class. The following DIMSE-C operation is used.</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem">
                  <p>C-FIND</p>
               </li>
            </ul>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_V.4.1" shape="rect"></a>V.4.1 C-FIND Operation</h3>
                  </div>
               </div>
            </div>
            <p>SCPs of SOP Classes of the Substance Administration Query Service Class are capable of processing queries using the C-FIND operation as described in <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a>. The C-FIND operation is the mechanism by which queries are performed. Matches against the keys present in the Identifier are returned in C-FIND responses.</p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_V.4.1.1" shape="rect"></a>V.4.1.1 C-FIND Service Parameters</h4>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_V.4.1.1.1" shape="rect"></a>V.4.1.1.1 SOP Class UID</h5>
                        </div>
                     </div>
                  </div>
                  <p>The SOP Class UID identifies the Substance Administration Query Information Model against which the C-FIND is to be performed. Support for the SOP Class UID is implied by the Abstract Syntax UID of the Presentation Context used by this C-FIND operation.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_V.4.1.1.2" shape="rect"></a>V.4.1.1.2 Priority</h5>
                        </div>
                     </div>
                  </div>
                  <p>The Priority Attribute defines the requested priority of the C-FIND operation with respect to other DIMSE operations being performed by the same SCP.</p>
                  <p>Processing of priority requests is not required of SCPs. Whether or not an SCP supports priority processing and the meaning of the different priority levels shall be stated in the Conformance Statement of the SCP.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_V.4.1.1.3" shape="rect"></a>V.4.1.1.3 Identifier</h5>
                        </div>
                     </div>
                  </div>
                  <p>Both the C-FIND request and response contain an Identifier encoded as a Data Set (see <a href="../part05/PS3.5.html" class="olink" shape="rect">PS3.5</a>).</p>
                  <div class="section">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h6 class="title">
                                 <a id="sect_V.4.1.1.3.1" shape="rect"></a>V.4.1.1.3.1 Request Identifier Structure</h6>
                           </div>
                        </div>
                     </div>
                     <p>An Identifier in a C-FIND request shall contain</p>
                     <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; ">
                           <li class="listitem">
                              <p>Key Attributes values to be matched against the values of Attributes specified in that SOP Class.</p>
                           </li>
                           <li class="listitem">
                              <p>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Request Identifier. It shall not be included otherwise.</p>
                           </li>
                        </ul>
                     </div>
                     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">Note</h3>
                        <p>This means that Specific Character Set (0008,0005) is included if the SCU supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCU.</p>
                     </div>
                     <p>The Key Attributes and values allowable for the query shall be defined in the SOP Class definition for the corresponding Substance Administration Query Information Model.</p>
                  </div>
                  <div class="section">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h6 class="title">
                                 <a id="sect_V.4.1.1.3.2" shape="rect"></a>V.4.1.1.3.2 Response Identifier Structure</h6>
                           </div>
                        </div>
                     </div>
                     <p>The C-FIND response shall not contain Attributes that were not in the request or specified in this section.</p>
                     <p>An Identifier in a C-FIND response shall contain:</p>
                     <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; ">
                           <li class="listitem">
                              <p>Key Attributes with values corresponding to Key Attributes contained in the Identifier of the request (Key Attributes as defined in <a class="xref" href="sect_V.2.html#sect_V.2.2.1" title="V.2.2.1 Attribute Types" shape="rect">Section V.2.2.1</a>.)</p>
                           </li>
                           <li class="listitem">
                              <p>Conditionally, the Attribute Specific Character Set (0008,0005). This Attribute shall be included if expanded or replacement character sets may be used in any of the Attributes in the Response Identifier. It shall not be included otherwise. The C-FIND SCP is not required to return responses in the Specific Character Set requested by the SCU if that character set is not supported by the SCP. The SCP may return responses with a different Specific Character Set.</p>
                           </li>
                        </ul>
                     </div>
                     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">Note</h3>
                        <p>This means that Specific Character Set (0008,0005) is included if the SCP supports expanded or replacement character sets in the context of this service. It will not be included if expanded or replacement character sets are not supported by the SCP.</p>
                     </div>
                     <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: disc; ">
                           <li class="listitem">
                              <p>Conditionally, the Attribute HL7 Structured Document Reference Sequence (0040,A390) and its subsidiary Sequence Items as specified in the SOP Common Module (see <a href="../part03/PS3.3.html" class="olink" shape="rect">PS3.3</a>). This Attribute shall be included if HL7 Structured Documents are referenced within the Identifier, e.g., in the Pertinent Documents Sequence (0038,0100).</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_V.4.1.1.4" shape="rect"></a>V.4.1.1.4 Status</h5>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a class="xref" href="sect_V.4.html#table_V.4-1" title="Table V.4-1. C-FIND Response Status Values" shape="rect">Table V.4-1</a> defines the status code values that might be returned in a C-FIND response. Fields related to status code values are defined in <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a>.</p>
                  <div class="table">
                     <a id="table_V.4-1" shape="rect"></a>
                     <p class="title">
                        <strong>Table V.4-1. C-FIND Response Status Values</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <span class="bold">
                                          <strong>Service Status</strong>
                                       </span>
                                    </p>
                                 </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <span class="bold">
                                          <strong>Further Meaning</strong>
                                       </span>
                                    </p>
                                 </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <span class="bold">
                                          <strong>Status Codes</strong>
                                       </span>
                                    </p>
                                 </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <span class="bold">
                                          <strong>Related Fields</strong>
                                       </span>
                                    </p>
                                 </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="3" colspan="1">
                                    <p>Failure</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Refused: Out of Resources</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>A700</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>(0000,0902)</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Identifier Does Not Match SOP Class</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>A900</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>(0000,0901)</p>
                                    <p>(0000,0902)</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Unable to process</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>Cxxx</p>
                                    <p>(values C000 through CFFF as assigned by the implementation)</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>(0000,0901)</p>
                                    <p>(0000,0902)</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Cancel</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Matching terminated due to Cancel request</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>FE00</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Success</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Matching is complete - No final Identifier is supplied.</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>0000</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="2" colspan="1">
                                    <p>Pending</p>
                                 </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Matches are continuing - Current Match is supplied and any Optional Keys were supported in the same manner as Required Keys.</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>FF00</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>Identifier</p>
                                 </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>Matches are continuing - Warning that one or more Optional Keys were not supported for existence for this Identifier.</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>FF01</p>
                                 </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>Identifier</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
                  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title">Note</h3>
                     <p>Status Codes are returned in DIMSE response messages (see <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a>). The code values stated in column "Status Codes" are returned in Status Command Element (0000,0900).</p>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_V.4.1.2" shape="rect"></a>V.4.1.2 C-FIND SCU Behavior</h4>
                     </div>
                  </div>
               </div>
               <p>All C-FIND SCUs shall be capable of generating query requests that meet the requirements of the Query Search Method (see <a class="xref" href="sect_V.4.html#sect_V.4.1.3.1" title="V.4.1.3.1 Query Search Method" shape="rect">Section V.4.1.3.1</a>).</p>
               <p>Required Keys and Optional Keys associated with the Query may be contained in the Identifier.</p>
               <p>An SCU conveys the following semantics using the C-FIND requests and responses:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        <p>The SCU requests that the SCP perform a match of all keys specified in the Identifier of the request against the information it possesses of the Query specified in the request.</p>
                     </li>
                     <li class="listitem">
                        <p>The SCU shall interpret Pending responses to convey the Attributes of a match of an item.</p>
                     </li>
                     <li class="listitem">
                        <p>The SCU shall interpret a response with a status equal to Success, Failure, or Cancel to convey the end of Pending responses.</p>
                     </li>
                     <li class="listitem">
                        <p>The SCU shall interpret a Failure response to a C-FIND request as an indication that the SCP is unable to process the request.</p>
                     </li>
                     <li class="listitem">
                        <p>The SCU may cancel the C-FIND service by issuing a C-FIND-CANCEL request at any time during the processing of the C-FIND. The SCU shall recognize a status of Cancel to indicate that the C-FIND-CANCEL was successful.</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_V.4.1.3" shape="rect"></a>V.4.1.3 C-FIND SCP Behavior</h4>
                     </div>
                  </div>
               </div>
               <p>All C-FIND SCPs shall be capable of processing queries that meet the requirements of the Query Search (see <a class="xref" href="sect_V.4.html#sect_V.4.1.3.1" title="V.4.1.3.1 Query Search Method" shape="rect">Section V.4.1.3.1</a>).</p>
               <p>An SCP conveys the following semantics using the C-FIND requests and responses:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        <p>The SCP is requested to perform a match of all the keys specified in the Identifier of the request, against the information it possesses. Attribute matching is performed using the key values specified in the Identifier of the C-FIND request as defined in <a class="xref" href="sect_V.2.html" title="V.2 Substance Administration Query Information Model Definition" shape="rect">Section V.2</a>.</p>
                     </li>
                     <li class="listitem">
                        <p>The SCP generates at most one C-FIND response for a match using the "Query" Search method. Such a response shall contain an Identifier whose Attributes contain values from the match. The response shall contain a status of Pending.</p>
                     </li>
                     <li class="listitem">
                        <p>When matching is complete and any match has been sent, the SCP generates a C-FIND response that contains a status of Success. A status of Success shall indicate that a response has been sent for any match known to the SCP.</p>
                     </li>
                  </ul>
               </div>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <div class="orderedlist">
                     <ol class="orderedlist" type="1">
                        <li class="listitem">
                           <p>No Identifier is contained in a response with a status of Success. For a complete definition, see <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a>.</p>
                        </li>
                        <li class="listitem">
                           <p>When there are no matches, then no responses with a status of Pending are sent, only a single response with a status of Success.</p>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        <p>The SCP shall generate a response with a status of Failure if it is unable to process the request. A Failure response shall contain no Identifier.</p>
                     </li>
                     <li class="listitem">
                        <p>If the SCP receives a C-FIND-CANCEL indication before it has completed the processing of the matches it shall interrupt the matching process and return a status of Cancel.</p>
                     </li>
                  </ul>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_V.4.1.3.1" shape="rect"></a>V.4.1.3.1 Query Search Method</h5>
                        </div>
                     </div>
                  </div>
                  <p>The following procedure is used to generate matches.</p>
                  <p>The key match Attributes contained in the Identifier of the C-FIND request are matched against the values of the Key Attributes for each Query entity. For each entity for which the Attributes match all of the specified match Attributes, construct an Identifier. This Identifier shall contain all of the values of the Attributes for this entity that match those in the C-FIND request. Return a response for each such Identifier. If there are no matching keys, then there are no matches; return a response with a status equal to Success and with no Identifier.</p>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_V.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_V.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_V.5.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">V.3 Query Information Models </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.4.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> V.5 Association Negotiation</td>
            </tr>
         </table>
      </div>
   </body>
</html>
